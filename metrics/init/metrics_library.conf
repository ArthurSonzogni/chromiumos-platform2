# Copyright (c) 2014 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

description     "Metrics Library upstart file"
author          "chromium-os-dev@chromium.org"

# The metrics library is used by several programs (daemons and others)
# to send UMA stats.
start on starting boot-services

pre-start script
  # Create the file used as communication endpoint for metrics.
  RUNDIR=/var/run/metrics
  EVENTS_FILE=${RUNDIR}/uma-events
  mkdir -p ${RUNDIR}
  touch ${EVENTS_FILE}
  chmod 666 ${EVENTS_FILE}
end script
