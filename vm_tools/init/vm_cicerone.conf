# Copyright 2018 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

description    "Start the VM container communication service"
author         "chromium-os-dev@chromium.org"

# Starts the service that communicates with containers running inside of VMs.
# This sends/receives message into/from the container.
start on starting vm_concierge
stop on stopped vm_concierge
respawn

# Launch this process jailed with a new IPC namespace, new PID namespace,
# remount /proc, new mount namespace, no new privileges, drop all caps,
# launch as user/group vm_cicerone, set up seccomp-bpf.
exec minijail0 -l -p -r -v -n -c 0 -u vm_cicerone -g vm_cicerone \
     -S /usr/share/policy/vm_cicerone-seccomp.policy -- /usr/bin/vm_cicerone
