# Copyright (c) 2011 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# cros-disks upstart job

env CROS_DISKS_UID=213
env CROS_DISKS_GID=213

# Minimum log level defined in base/logging.h.
#   0:INFO, 1:WARNING, 2:ERROR, 3:ERROR_REPORT, 4:FATAL
# Set to log only WARNING or above by default.
env CROS_DISKS_MINLOGLEVEL=1

start on starting system-services and started dbus
stop on stopping system-services

respawn
expect fork

#exec /sbin/minijail --use-capabilities --uid="${CROS_DISKS_UID}" --gid="${CROS_DISKS_GID}" -- /opt/google/cros-disks/disks
exec /opt/google/cros-disks/disks -minloglevel=${CROS_DISKS_MINLOGLEVEL}
